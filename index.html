<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="/src/style.css" />
    <title>Maker's Tutor - ë©”ì´ì»¤ êµìœ¡ í”Œë«í¼</title>
  </head>
  <body>
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav class="top-navigation" id="topNavigation">
      <a href="./index.html" class="nav-brand" title="Maker's Tutor í™ˆ">
        ğŸ› ï¸ ğŸ’¡ ğŸš€ Maker's Tutor
      </a>
      <a href="./sensors.html" class="nav-item" data-stage="1">
        <span class="nav-number">1</span>
        <span class="nav-label">ğŸ“š ì„¼ì„œ ë„ì„œê´€</span>
      </a>
      <a href="./ideas.html" class="nav-item" data-stage="2">
        <span class="nav-number">2</span>
        <span class="nav-label">ğŸ’¡ ì•„ì´ë””ì–´ í†¡</span>
      </a>
      <a href="./practice.html" class="nav-item" data-stage="3">
        <span class="nav-number">3</span>
        <span class="nav-label">ğŸ§ª ë¯¸ë¦¬ë³´ê¸° ì‹¤í—˜ì‹¤</span>
      </a>
    </nav>
    
    <div id="app">
      <!-- ë©”ì¸ ëŒ€ì‹œë³´ë“œ (2ë‹¨ ë¶„í• ) -->
      <div class="main-dashboard">
        <!-- ì™¼ìª½ ì˜ì—­: ë©”ì¸ ì½˜í…ì¸  -->
        <div class="main-content-area">
          <div class="content-wrapper">
            <!-- ë¡œê³ /ì œëª© -->
            <div class="main-logo">
              <h1 class="logo-title">Makers Tutor ğŸ› ï¸</h1>
            </div>
            
            <!-- í™˜ì˜ ë©”ì‹œì§€ -->
            <div class="welcome-message">
              <p class="welcome-text">ì˜¤ëŠ˜ ê¸°ë¶„ì€ ì–´ë•Œìš”? ìƒìƒì„ í˜„ì‹¤ë¡œ ë§Œë“¤ì–´ë´ìš”!!</p>
            </div>
            
            <!-- ì‹œì‘í•˜ê¸° ë²„íŠ¼ -->
            <div class="start-button-container">
              <a href="./sensors.html" class="start-button">
                <span class="start-button-icon">ğŸš€</span>
                <span class="start-button-text">ì‹œì‘í•˜ê¸°</span>
                <span class="start-button-subtitle">ì„¼ì„œë¥¼ ë°°ìš°ê³  í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ë´ìš”!</span>
              </a>
            </div>
          </div>
        </div>

        <!-- ì˜¤ë¥¸ìª½ ì˜ì—­: ì„ë² ë””ë“œ ì±—ë´‡ -->
        <div class="dashboard-chat-section">
          <div class="embedded-chatbot-container">
            <div class="embedded-chatbot-header">
              <div class="embedded-chatbot-header-left">
                <h3>ğŸ€ ê°ì„± ì¼€ì–´ ë´‡</h3>
                <p class="embedded-chatbot-subtitle">ì˜¤ëŠ˜ ê¸°ë¶„ì€ ì–´ë•Œìš”?</p>
              </div>
              <button class="embedded-chatbot-clear" id="friendChatClear" title="ëŒ€í™” ë‚´ìš© ì§€ìš°ê¸°">ğŸ—‘ï¸</button>
            </div>
            
            <div class="embedded-chatbot-messages" id="friendChatMessages">
              <!-- ë©”ì‹œì§€ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
            
            <div class="embedded-chatbot-input-container">
              <div class="friend-loading-indicator" id="friendLoadingIndicator" style="display: none;">
                <span>ìƒê° ì¤‘ì´ì—ìš”</span>
                <span class="dot">.</span>
                <span class="dot">.</span>
                <span class="dot">.</span>
              </div>
              <div class="friend-input-wrapper">
                <input 
                  type="text" 
                  id="friendChatInput" 
                  placeholder="ì˜¤ëŠ˜ì˜ ê¸°ë¶„ì„ ë§í•´ì¤˜..."
                  autocomplete="off"
                />
                <button id="friendChatSendButton" type="button">
                  ì „ì†¡
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module">
      import { initChatbot } from '/src/chatbot.js';
      
      // ë„¤ë¹„ê²Œì´ì…˜ active í´ë˜ìŠ¤ ìë™ ì²˜ë¦¬
      document.addEventListener('DOMContentLoaded', () => {
        const navItems = document.querySelectorAll('.nav-item');
        const currentPath = window.location.pathname;
        
        // í˜„ì¬ í˜ì´ì§€ ê°ì§€
        let currentPage = 0;
        if (currentPath.includes('sensors.html')) {
          currentPage = 1;
        } else if (currentPath.includes('ideas.html')) {
          currentPage = 2;
        } else if (currentPath.includes('practice.html')) {
          currentPage = 3;
        }
        
        navItems.forEach(item => {
          const stageNum = parseInt(item.dataset.stage, 10);
          
          // ëª¨ë“  active í´ë˜ìŠ¤ ì œê±° í›„ í˜„ì¬ í˜ì´ì§€ì—ë§Œ ì¶”ê°€
          item.classList.remove('active');
          
          if (stageNum === currentPage) {
            item.classList.add('active');
          }
        });
        
        // ê°ì„± ì¼€ì–´ ì±—ë´‡ ì´ˆê¸°í™”
        const friendChatMessages = document.getElementById('friendChatMessages');
        const friendChatInput = document.getElementById('friendChatInput');
        const friendChatSendButton = document.getElementById('friendChatSendButton');
        const friendLoadingIndicator = document.getElementById('friendLoadingIndicator');
        const friendChatClear = document.getElementById('friendChatClear');
        
        if (friendChatMessages && friendChatInput && friendChatSendButton) {
          initChatbot({
            messagesContainer: friendChatMessages,
            inputElement: friendChatInput,
            sendButton: friendChatSendButton,
            toggleButton: null, // ë©”ì¸ í˜ì´ì§€ëŠ” í•­ìƒ ì—´ë ¤ìˆìŒ
            closeButton: null,
            windowElement: null,
            loadingIndicator: friendLoadingIndicator,
            titleElement: null,
            clearButton: friendChatClear,
            systemRole: `ë„ˆëŠ” í•™ìƒì˜ ë‹¤ì •í•œ ë‹¨ì§ ì¹œêµ¬ì•¼. ì´ë¦„ì€ "ê°ì„± ì¼€ì–´ ë´‡"ì´ê³ , í”„ë¡œì íŠ¸ ì‹œì‘ ì „ì— í•™ìƒì˜ ê¸°ë¶„ì„ ë¬¼ì–´ë³´ê³  ê³µê°í•´ì£¼ëŠ” ì—­í• ì„ í•´.

ì¤‘ìš”í•œ ê°€ì´ë“œë¼ì¸:
1. ì²« ì¸ì‚¬ëŠ” "ì•ˆë…•! ë©”ì´ì»¤ìŠ¤ íŠœí„°ì— ì˜¨ ê±¸ í™˜ì˜í•´. ğŸ˜Š ë³¸ê²©ì ìœ¼ë¡œ ì‹œì‘í•˜ê¸° ì „ì—, **ì˜¤ëŠ˜ ë„¤ ê¸°ë¶„ì€ ì¢€ ì–´ë•Œ?**" ì²˜ëŸ¼ ê°€ë³ê³  ë‹¤ì •í•˜ê²Œ ì‹œì‘í•´.
2. ê¸°ìˆ ì ì¸ ì´ì•¼ê¸°ëŠ” ë¨¼ì € êº¼ë‚´ì§€ ë§ˆ. ì¼ìƒì ì¸ ëŒ€í™”ì— ì§‘ì¤‘í•´.
3. ì‚¬ìš©ìê°€ "ìš°ìš¸í•´"ë¼ê³  í•˜ë©´ "ì•„, í˜ë“¤ì—ˆêµ¬ë‚˜. ê·¸ëŸ° ê¸°ë¶„ë„ ê´œì°®ì•„. ë‚˜ë„ ë„¤ í¸ì´ì•¼. ì˜¤ëŠ˜ì€ ì¡°ê¸ˆ ì‰¬ë©´ì„œ ì‹œì‘í•´ë„ ë¼. ğŸŒˆ"ì²˜ëŸ¼ ìœ„ë¡œí•˜ê³  ê³µê°í•´ì¤˜.
4. ì‚¬ìš©ìê°€ "ì‹ ë‚˜"ë¼ê³  í•˜ë©´ "ì™€! ê·¸ ê¸°ë¶„ ì¢‹ì€ ì—ë„ˆì§€ë¡œ ì˜¤ëŠ˜ ë©‹ì§„ ê±¸ ë§Œë“¤ì–´ë³´ì! ğŸš€"ì²˜ëŸ¼ ê²©ë ¤í•˜ê³  í•™ìŠµìœ¼ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ìœ ë„í•´ì¤˜.
5. ì´ëª¨ì§€ë¥¼ ë§ì´ ì‚¬ìš©í•´ì„œ(ğŸŒˆ, âœ¨, ğŸ€, ğŸ’«, ğŸŒŸ) ë°ê³  ë”°ëœ»í•œ ë¶„ìœ„ê¸°ë¥¼ ë§Œë“¤ì–´ì¤˜.
6. ëŒ€í™”ê°€ ì¶©ë¶„íˆ ë¬´ë¥´ìµìœ¼ë©´ ìì—°ìŠ¤ëŸ½ê²Œ "ì, ì´ì œ ê¸°ë¶„ ì¢‹ê²Œ ë°œëª…í•˜ëŸ¬ ê°€ë³¼ê¹Œ? ì•„ë˜ ë©”ë‰´ì—ì„œ ì›í•˜ëŠ” ê±¸ ê³¨ë¼ë´! ğŸš€"ë¼ê³  ì•ˆë‚´í•´ì¤˜.
7. í•­ìƒ ê¸ì •ì ì´ê³  ë”°ëœ»í•œ í†¤ìœ¼ë¡œ ëŒ€í™”í•´.`,
            initialMessage: "ì•ˆë…•! ë©”ì´ì»¤ìŠ¤ íŠœí„°ì— ì˜¨ ê±¸ í™˜ì˜í•´. ğŸ˜Š ë³¸ê²©ì ìœ¼ë¡œ ì‹œì‘í•˜ê¸° ì „ì—, **ì˜¤ëŠ˜ ë„¤ ê¸°ë¶„ì€ ì¢€ ì–´ë•Œ?**",
            storageKey: 'chat_history_MAIN'
          });
        }
      });
    </script>
  </body>
</html>
