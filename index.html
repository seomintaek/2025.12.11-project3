<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="/src/style.css" />
    <title>Maker's Tutor - ë©”ì´ì»¤ êµìœ¡ í”Œë«í¼</title>
  </head>
  <body>
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav class="top-navigation" id="topNavigation">
      <a href="./index.html" class="nav-brand" title="Maker's Tutor í™ˆ">
        ğŸ› ï¸ ğŸ’¡ ğŸš€ Maker's Tutor
      </a>
      <a href="./sensors.html" class="nav-item" data-stage="1">
        <span class="nav-number">1</span>
        <span class="nav-label">ğŸ“š ì„¼ì„œ ë„ì„œê´€</span>
      </a>
      <a href="./ideas.html" class="nav-item" data-stage="2">
        <span class="nav-number">2</span>
        <span class="nav-label">ğŸ’¡ ì•„ì´ë””ì–´ í†¡</span>
      </a>
      <a href="./practice.html" class="nav-item" data-stage="3">
        <span class="nav-number">3</span>
        <span class="nav-label">ğŸ§ª ë¯¸ë¦¬ë³´ê¸° ì‹¤í—˜ì‹¤</span>
      </a>
    </nav>
    
    <div id="app">
      <!-- ë©”ì¸ ëŒ€ì‹œë³´ë“œ (2ë‹¨ ë¶„í• ) -->
      <div class="main-dashboard">
        <!-- ì™¼ìª½ ì˜ì—­: ë©”ì¸ ì½˜í…ì¸  -->
        <div class="main-content-area">
          <div class="content-wrapper">
            <!-- ë¡œê³ /ì œëª© -->
            <div class="main-logo">
              <h1 class="logo-title">Makers Tutor ğŸ› ï¸</h1>
            </div>
            
            <!-- í™˜ì˜ ë©”ì‹œì§€ -->
            <div class="welcome-message">
              <p class="welcome-text">ì˜¤ëŠ˜ ê¸°ë¶„ì€ ì–´ë•Œìš”? ìƒìƒì„ í˜„ì‹¤ë¡œ ë§Œë“¤ì–´ë´ìš”!</p>
            </div>
            
            <!-- ì‹œì‘í•˜ê¸° ë²„íŠ¼ -->
            <div class="start-button-container">
              <a href="./sensors.html" class="start-button">
                <span class="start-button-icon">ğŸš€</span>
                <span class="start-button-text">ì‹œì‘í•˜ê¸°</span>
                <span class="start-button-subtitle">ì„¼ì„œë¥¼ ë°°ìš°ê³  í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ë´ìš”!</span>
              </a>
            </div>
          </div>
        </div>

        <!-- ì˜¤ë¥¸ìª½ ì˜ì—­: ì„ë² ë””ë“œ ì±—ë´‡ -->
        <div class="dashboard-chat-section">
          <div class="embedded-chatbot-container">
            <div class="embedded-chatbot-header">
              <div class="embedded-chatbot-header-left">
                <h3>ğŸ€ ê°ì„± ì¼€ì–´ ë´‡</h3>
                <p class="embedded-chatbot-subtitle">ì˜¤ëŠ˜ ê¸°ë¶„ì€ ì–´ë•Œìš”?</p>
              </div>
              <button class="embedded-chatbot-clear" id="friendChatClear" title="ëŒ€í™” ë‚´ìš© ì§€ìš°ê¸°">ğŸ—‘ï¸</button>
            </div>
            
            <div class="embedded-chatbot-messages" id="friendChatMessages">
              <!-- ë©”ì‹œì§€ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
            
            <div class="embedded-chatbot-input-container">
              <div class="friend-loading-indicator" id="friendLoadingIndicator" style="display: none;">
                <span>ìƒê° ì¤‘ì´ì—ìš”</span>
                <span class="dot">.</span>
                <span class="dot">.</span>
                <span class="dot">.</span>
              </div>
              <div class="friend-input-wrapper">
                <input 
                  type="text" 
                  id="friendChatInput" 
                  placeholder="ì˜¤ëŠ˜ì˜ ê¸°ë¶„ì„ ë§í•´ì¤˜..."
                  autocomplete="off"
                />
                <button id="friendChatSendButton" type="button">
                  ì „ì†¡
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module">
      import { initChatbot } from '/src/chatbot.js';
      
      // ë„¤ë¹„ê²Œì´ì…˜ active í´ë˜ìŠ¤ ìë™ ì²˜ë¦¬
      document.addEventListener('DOMContentLoaded', () => {
        const navItems = document.querySelectorAll('.nav-item');
        const currentPath = window.location.pathname;
        
        navItems.forEach(item => {
          // ë©”ì¸ í˜ì´ì§€ì—ì„œëŠ” ëª¨ë“  ë©”ë‰´ ë¹„í™œì„±í™”
          if (currentPath === '/' || currentPath.endsWith('/') || currentPath.includes('index.html')) {
            item.classList.remove('active');
          }
        });
        
        // ê°ì„± ì¼€ì–´ ì±—ë´‡ ì´ˆê¸°í™”
        const friendChatMessages = document.getElementById('friendChatMessages');
        const friendChatInput = document.getElementById('friendChatInput');
        const friendChatSendButton = document.getElementById('friendChatSendButton');
        const friendLoadingIndicator = document.getElementById('friendLoadingIndicator');
        const friendChatClear = document.getElementById('friendChatClear');
        
        if (friendChatMessages && friendChatInput && friendChatSendButton) {
          initChatbot({
            messagesContainer: friendChatMessages,
            inputElement: friendChatInput,
            sendButton: friendChatSendButton,
            toggleButton: null, // ë©”ì¸ í˜ì´ì§€ëŠ” í•­ìƒ ì—´ë ¤ìˆìŒ
            closeButton: null,
            windowElement: null,
            loadingIndicator: friendLoadingIndicator,
            titleElement: null,
            clearButton: friendChatClear
          });
          
          // ëŒ€í™” ì§€ìš°ê¸° ë²„íŠ¼ ì´ë²¤íŠ¸ëŠ” chatbot.jsì˜ clearHistoryì—ì„œ ì²˜ë¦¬ë¨
          // ì¶”ê°€ ì»¤ìŠ¤í…€ ë¡œì§ì´ í•„ìš”í•˜ë©´ ì—¬ê¸°ì— ì‘ì„±
        }
      });
    </script>
  </body>
</html>
